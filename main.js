"use strict";if(localStorage.getItem("dark-mode")==="enabled"){document.body.classList.add("dark-mode");const preloader=document.getElementById("preloader");if(preloader){preloader.classList.add("dark-mode")}}window.addEventListener("load",function(){const preloader=document.getElementById("preloader");setTimeout(function(){preloader.style.opacity="0";preloader.style.visibility="hidden";document.body.style.overflow="";setTimeout(function(){preloader.remove()},500)},2e3)});document.body.style.overflow="hidden";function myMenuFunction(){var menuBtn=document.getElementById("myNavMenu");if(menuBtn.className==="nav-menu"){menuBtn.className+=" responsive"}else{menuBtn.className="nav-menu"}}document.addEventListener("DOMContentLoaded",function(){const navLinks=document.querySelectorAll(".nav-menu .nav-link");navLinks.forEach(link=>{link.addEventListener("click",function(){const navMenu=document.getElementById("myNavMenu");if(navMenu.classList.contains("responsive")){navMenu.className="nav-menu"}})})});window.onscroll=function(){handleNavigation()};function handleNavigation(){const navHeader=document.getElementById("header");const navSpacer=document.getElementById("nav-spacer");const scrollPosition=window.scrollY;if(scrollPosition>100){navHeader.classList.add("sticky");navSpacer.classList.add("spacer-active")}else{navHeader.classList.remove("sticky");navSpacer.classList.remove("spacer-active")}if(scrollPosition>50){navHeader.style.boxShadow="0 1px 6px rgba(0, 0, 0, 0.1)";navHeader.style.height="70px";navHeader.style.lineHeight="70px"}else if(scrollPosition<=50&&!navHeader.classList.contains("sticky")){navHeader.style.boxShadow="none";navHeader.style.height="90px";navHeader.style.lineHeight="90px"}scrollActive()}const sections=document.querySelectorAll("section[id]");function scrollActive(){const scrollY=window.scrollY;sections.forEach(current=>{const sectionHeight=current.offsetHeight,sectionTop=current.offsetTop-50,sectionId=current.getAttribute("id");const navLink=document.querySelector(`.nav-menu a[href*="${sectionId}"]`);if(scrollY>sectionTop&&scrollY<=sectionTop+sectionHeight){if(navLink)navLink.classList.add("active-link")}else{if(navLink)navLink.classList.remove("active-link")}});if(scrollY<50){const homeLink=document.querySelector('.nav-menu a[href*="home"]');if(homeLink)homeLink.classList.add("active-link")}}document.addEventListener("DOMContentLoaded",function(){const galleryItems=document.querySelectorAll(".gallery-item");const lightbox=document.getElementById("lightbox");const lightboxImg=document.getElementById("lightbox-img");const lightboxClose=document.querySelector(".lightbox-close");const lightboxPrev=document.querySelector(".lightbox-prev");const lightboxNext=document.querySelector(".lightbox-next");const lightboxTitle=document.getElementById("lightbox-title");const lightboxDesc=document.getElementById("lightbox-desc");let currentIndex=0;galleryItems.forEach((item,index)=>{item.addEventListener("click",function(){currentIndex=index;const imgSrc=this.getAttribute("data-img");const title=this.querySelector("h3").textContent;const desc=this.querySelector("p").textContent;openLightbox(imgSrc,title,desc)})});lightboxClose.addEventListener("click",closeLightbox);lightbox.addEventListener("click",function(e){if(e.target===lightbox){closeLightbox()}});lightboxPrev.addEventListener("click",function(){currentIndex=(currentIndex-1+galleryItems.length)%galleryItems.length;updateLightbox()});lightboxNext.addEventListener("click",function(){currentIndex=(currentIndex+1)%galleryItems.length;updateLightbox()});document.addEventListener("keydown",function(e){if(!lightbox.style.display||lightbox.style.display==="none")return;if(e.key==="Escape"){closeLightbox()}else if(e.key==="ArrowLeft"){currentIndex=(currentIndex-1+galleryItems.length)%galleryItems.length;updateLightbox()}else if(e.key==="ArrowRight"){currentIndex=(currentIndex+1)%galleryItems.length;updateLightbox()}});function openLightbox(imgSrc,title,desc){lightboxImg.src=imgSrc;lightboxTitle.textContent=title;lightboxDesc.textContent=desc;lightbox.style.display="block";lightbox.setAttribute("aria-hidden","false");document.body.style.overflow="hidden"}function closeLightbox(){lightbox.style.display="none";lightbox.setAttribute("aria-hidden","true");document.body.style.overflow=""}function updateLightbox(){const item=galleryItems[currentIndex];const imgSrc=item.getAttribute("data-img");const title=item.querySelector("h3").textContent;const desc=item.querySelector("p").textContent;lightboxImg.src=imgSrc;lightboxTitle.textContent=title;lightboxDesc.textContent=desc}const toggleSwitch=document.getElementById("toggle-switch");toggleSwitch.addEventListener("click",()=>{document.body.classList.toggle("dark-mode");if(document.body.classList.contains("dark-mode")){localStorage.setItem("dark-mode","enabled")}else{localStorage.setItem("dark-mode","disabled")}});initBackgroundMusic();const scrollToTopBtn=document.getElementById("scrollToTopBtn");window.addEventListener("scroll",function(){if(window.scrollY>300){scrollToTopBtn.classList.add("visible")}else{scrollToTopBtn.classList.remove("visible")}});scrollToTopBtn.addEventListener("click",function(){window.scrollTo({top:0,behavior:"smooth"})});setupProgressRing()});function setupProgressRing(){const circle=document.querySelector(".progress-ring__circle");if(!circle)return;const radius=parseFloat(circle.getAttribute("r"));const circumference=2*Math.PI*radius;circle.style.strokeDasharray=`${circumference} ${circumference}`;circle.style.strokeDashoffset=circumference}function initBackgroundMusic(){const audio=document.getElementById("audio");const playPauseBtn=document.getElementById("playPauseBtn");const prevBtn=document.getElementById("prevBtn");const nextBtn=document.getElementById("nextBtn");const nowPlayingText=document.getElementById("now-playing-text");const currentTrackName=document.getElementById("current-track-name");const trackArtistElement=document.getElementById("track-artist");const progressCircle=document.querySelector(".progress-ring__circle");if(!audio||!progressCircle){console.warn("Audio player elements not found in the DOM");return}let tracks=Array.from(document.querySelectorAll("#music-sources audio"));if(tracks.length===0){console.warn("No music sources found in #music-sources");return}let current=0;let isPlaying=false;let currentPlayAttempt=null;const radius=parseFloat(progressCircle.getAttribute("r"));const circumference=2*Math.PI*radius;progressCircle.style.strokeDasharray=`${circumference} ${circumference}`;progressCircle.style.strokeDashoffset=circumference;shuffleArray(tracks);function shuffleArray(array){for(let i=array.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[array[i],array[j]]=[array[j],array[i]]}return array}function initPlayer(){audio.volume=.4;loadTrack(current);audio.addEventListener("ended",function(){nextTrack()});audio.addEventListener("timeupdate",updateProgress);audio.addEventListener("error",function(e){console.error("Audio error:",e);showToast("Error playing track. Skipping to next.","error");nextTrack()})}function updateProgress(){if(!audio.duration)return;const percent=audio.currentTime/audio.duration;const offset=circumference-percent*circumference;progressCircle.style.strokeDashoffset=offset}function loadTrack(index){if(index>=tracks.length){console.error("Track index out of bounds:",index);return}const wasPlaying=isPlaying;if(isPlaying){pauseTrack()}const track=tracks[index];if(!track){console.error("Invalid track at index:",index);return}const title=track.getAttribute("data-title")||"Unknown Title";const artist=track.getAttribute("data-artist")||"Unknown Artist";const source=track.querySelector("source");if(!source||!source.src){console.error("Invalid source for track:",title);return}audio.src=source.src;audio.load();updateNowPlaying(title,artist);progressCircle.style.strokeDashoffset=circumference;if(wasPlaying){setTimeout(()=>{playTrack()},100)}}function playTrack(){if(!audio.src){console.error("No audio source set");showToast("No audio track loaded","error");return}if(currentPlayAttempt){currentPlayAttempt.cancel()}let playAttemptInProgress=true;currentPlayAttempt={cancel:function(){playAttemptInProgress=false}};playPauseBtn.innerHTML='<i class="fa-solid fa-pause" aria-hidden="true"></i>';playPauseBtn.setAttribute("aria-label","Pause music");isPlaying=true;audio.play().then(()=>{if(playAttemptInProgress){playPauseBtn.innerHTML='<i class="fa-solid fa-pause" aria-hidden="true"></i>';playPauseBtn.setAttribute("aria-label","Pause music");isPlaying=true}}).catch(error=>{console.error("Error playing audio:",error,"Source:",audio.src);if(playAttemptInProgress){playPauseBtn.innerHTML='<i class="fa-solid fa-play" aria-hidden="true"></i>';playPauseBtn.setAttribute("aria-label","Play music");isPlaying=false;showToast("Error playing track. Trying next one.","error");nextTrack()}}).finally(()=>{if(currentPlayAttempt&&!playAttemptInProgress){currentPlayAttempt=null}});return currentPlayAttempt}function pauseTrack(){if(currentPlayAttempt){currentPlayAttempt.cancel();currentPlayAttempt=null}if(audio){audio.pause();playPauseBtn.innerHTML='<i class="fa-solid fa-play" aria-hidden="true"></i>';playPauseBtn.setAttribute("aria-label","Play music");isPlaying=false}}function togglePlayPause(){if(audio.paused){playTrack()}else{pauseTrack()}}function prevTrack(){current=(current-1+tracks.length)%tracks.length;loadTrack(current);if(isPlaying){playTrack()}}function nextTrack(){current=(current+1)%tracks.length;loadTrack(current);if(isPlaying){playTrack()}}function updateNowPlaying(title,artist){if(nowPlayingText)nowPlayingText.textContent=`${title} - ${artist}`;if(currentTrackName)currentTrackName.textContent=title;if(trackArtistElement)trackArtistElement.textContent=artist}function showToast(message,type){let toastContainer=document.querySelector(".toast-container");if(!toastContainer){toastContainer=document.createElement("div");toastContainer.className="toast-container";document.body.appendChild(toastContainer)}const toast=document.createElement("div");toast.className=`toast ${type}`;toast.innerHTML=`
          <div class="toast-content">
            <i class="fa-solid ${type==="success"?"fa-check-circle":"fa-exclamation-circle"}" aria-hidden="true"></i>
            <div class="toast-message">${message}</div>
          </div>
          <i class="fa-solid fa-times toast-close" aria-hidden="true"></i>
        `;toastContainer.appendChild(toast);const closeBtn=toast.querySelector(".toast-close");closeBtn.addEventListener("click",()=>{toast.classList.add("toast-hiding");setTimeout(()=>toast.remove(),300)});setTimeout(()=>{toast.classList.add("toast-hiding");setTimeout(()=>toast.remove(),300)},5e3)}if(playPauseBtn)playPauseBtn.addEventListener("click",togglePlayPause);if(prevBtn)prevBtn.addEventListener("click",prevTrack);if(nextBtn)nextBtn.addEventListener("click",nextTrack);document.addEventListener("visibilitychange",()=>{if(document.hidden&&isPlaying){pauseTrack()}});initPlayer()}const speechBubble=document.querySelector(".speech-bubble");if(speechBubble){setTimeout(function(){speechBubble.classList.add("disappear");setTimeout(function(){speechBubble.remove()},1e3)},1e4)}const reducedMotion=window.matchMedia("(prefers-reduced-motion: reduce)").matches;function initAnimations(){if(reducedMotion)return;if(window.Typed){new Typed(".typedText",{strings:["Bruno Mars Cosplayer","DP Photo Editor","Coder"],loop:true,typeSpeed:100,backSpeed:80,backDelay:2e3})}if(window.ScrollReveal){const sr=ScrollReveal({origin:"top",distance:"80px",duration:2e3,reset:true});sr.reveal(".featured-text-card",{});sr.reveal(".featured-name",{delay:100});sr.reveal(".featured-text-info",{delay:200});sr.reveal(".featured-text-btn",{delay:200});sr.reveal(".social_icons",{delay:200});sr.reveal(".featured-image",{delay:300});sr.reveal(".project-box",{interval:200});sr.reveal(".gallery-item",{interval:200});sr.reveal(".top-header",{});const srLeft=ScrollReveal({origin:"left",distance:"80px",duration:2e3,reset:true});srLeft.reveal(".about-info",{delay:100});srLeft.reveal(".contact-info",{delay:100});const srRight=ScrollReveal({origin:"right",distance:"80px",duration:2e3,reset:true});srRight.reveal(".skills-box",{delay:100});srRight.reveal(".form-control",{delay:100})}}if("requestIdleCallback"in window){requestIdleCallback(initAnimations,{timeout:2e3})}else{window.addEventListener("load",()=>setTimeout(initAnimations,800))}document.addEventListener("DOMContentLoaded",function(){scrollActive();const yearElement=document.getElementById("current-year");if(yearElement){yearElement.textContent=new Date().getFullYear()}});document.addEventListener("DOMContentLoaded",function(){const form=document.querySelector(".form-control");const nameInput=document.getElementById("name");const emailInput=document.getElementById("email");const messageTextarea=document.getElementById("message");const submitButton=form.querySelector(".form-button .btn");submitButton.addEventListener("click",function(e){e.preventDefault();if(validateForm()){const originalButtonText=submitButton.innerHTML;submitButton.innerHTML='Sending <i class="fa-solid fa-spinner fa-spin" aria-hidden="true"></i>';submitButton.disabled=true;setTimeout(()=>{nameInput.value="";emailInput.value="";messageTextarea.value="";submitButton.innerHTML='Sent Successfully <i class="fa-solid fa-check" aria-hidden="true"></i>';submitButton.style.backgroundColor="#4CAF50";setTimeout(()=>{submitButton.innerHTML=originalButtonText;submitButton.disabled=false;submitButton.style.backgroundColor=""},3e3);showToast("Message sent successfully!","success")},1500)}});function validateForm(){let isValid=true;removeErrorStyles();if(!nameInput||nameInput.value.trim()===""){setErrorFor(nameInput,"Name cannot be empty");isValid=false}if(!emailInput||emailInput.value.trim()===""){setErrorFor(emailInput,"Email cannot be empty");isValid=false}else if(!isValidEmail(emailInput.value.trim())){setErrorFor(emailInput,"Email is not valid");isValid=false}if(!messageTextarea||messageTextarea.value.trim()===""){setErrorFor(messageTextarea,"Message cannot be empty");isValid=false}return isValid}function setErrorFor(input,message){if(!input)return;const formControl=input.parentElement;let errorDisplay=formControl.querySelector(".error-message");if(!errorDisplay){errorDisplay=document.createElement("div");errorDisplay.className="error-message";formControl.appendChild(errorDisplay)}input.classList.add("input-error");errorDisplay.innerText=message}function removeErrorStyles(){const errorMessages=form.querySelectorAll(".error-message");errorMessages.forEach(el=>el.remove());const errorInputs=form.querySelectorAll(".input-error");errorInputs.forEach(input=>input.classList.remove("input-error"))}function isValidEmail(email){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)}function showToast(message,type){let toastContainer=document.querySelector(".toast-container");if(!toastContainer){toastContainer=document.createElement("div");toastContainer.className="toast-container";document.body.appendChild(toastContainer)}const toast=document.createElement("div");toast.className=`toast ${type}`;toast.innerHTML=`
      <div class="toast-content">
        <i class="fa-solid ${type==="success"?"fa-check-circle":"fa-exclamation-circle"}" aria-hidden="true"></i>
        <div class="toast-message">${message}</div>
      </div>
      <i class="fa-solid fa-times toast-close" aria-hidden="true"></i>
    `;toastContainer.appendChild(toast);const closeBtn=toast.querySelector(".toast-close");closeBtn.addEventListener("click",()=>{toast.classList.add("toast-hiding");setTimeout(()=>toast.remove(),300)});setTimeout(()=>{toast.classList.add("toast-hiding");setTimeout(()=>toast.remove(),300)},5e3)}});document.addEventListener("DOMContentLoaded",function(){const video=document.querySelector(".background-video");if(!video)return;const tryPlay=()=>{if(!video.dataset.autoplay)return;const reduceMotion=window.matchMedia("(prefers-reduced-motion: reduce)").matches;const saveData=navigator.connection&&navigator.connection.saveData;if(reduceMotion||saveData)return;const start=()=>{if(video.readyState===0)video.load();video.play().catch(()=>{})};if("requestIdleCallback"in window){requestIdleCallback(start,{timeout:2e3})}else{setTimeout(start,1200)}};if(document.readyState==="complete"){tryPlay()}else{window.addEventListener("load",tryPlay)}checkWebPSupport()});function checkWebPSupport(){const webP=new Image;webP.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA";webP.onload=webP.onerror=function(){const isWebPSupported=webP.height===2;document.body.classList.add(isWebPSupported?"webp":"no-webp");if(!isWebPSupported){const webpImages=document.querySelectorAll('img[src$=".webp"]');webpImages.forEach(img=>{img.src=img.src.replace(".webp",".jpg");if(img.srcset){img.srcset=img.srcset.replace(/\.webp/g,".jpg")}})}}}